var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,h,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[h]=d.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var h=0;return $jscomp.iteratorPrototype(function(){return h<b.length?{done:!1,value:b[h++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var h=b[Symbol.iterator];return h?h.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var h,d=[];!(h=b.next()).done;)d.push(h.value);return d};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(b,h){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var d=0,g={next:function(){if(d<b.length){var e=d++;return{value:h(e,b[e]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill=function(b,h,d,g){if(h){d=$jscomp.global;b=b.split(".");for(g=0;g<b.length-1;g++){var e=b[g];e in d||(d[e]={});d=d[e]}b=b[b.length-1];g=d[b];h=h(g);h!=g&&null!=h&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,d,g){var e=this.length||0;0>d&&(d=Math.max(0,e+d));if(null==g||g>e)g=e;g=Number(g);0>g&&(g=Math.max(0,e+g));for(d=Number(d||0);d<g;d++)this[d]=b;return this}},"es6-impl","es3");
(function(b){var h=function(e){"string"===typeof e&&(e=b(e));0==e.length?b.error("bad selector (selected no elements)."):1<e.length&&b.error("bad selector (selected two or more elements).");if(e[0].as_pixie)return e[0].as_pixie;var d={$:e,kind_of:{}};return e[0].as_pixie=d},d=function(e){0==e.length?b.error("bad selector (selected no elements)."):1<e.length&&b.error("bad selector (selected two or more elements).");return e[0].as_pixie},g={paned:function(){var e={border:5,pos:"50%",pos_min:"10%",pos_max:"90% - 5",
color:"lightgray"},d=function(a){for(var b=0;b<a.length;b++)a[b].$.detach()},l=function(a,b){"string"===typeof a.pos&&a.pos.match(/%/)?a.true_pos=eval(a.pos.replace(/%/," / 100 * "+b)):a.true_pos=a.pos;"string"===typeof a.pos_min&&a.pos_min.match(/%/)?a.true_pos_min=eval(a.pos_min.replace(/%/," / 100 * "+b)):a.true_pos_min=a.pos_min;"string"===typeof a.pos_max&&a.pos_max.match(/%/)?a.true_pos_max=eval(a.pos_max.replace(/%/," / 100 * "+b)):a.true_pos_max=a.pos_max},k=function(a){return{width:a.width(),
height:a.height()}},n=function(){this.bar={$:b("<div></div>").css({backgroundColor:this.options.color,position:"absolute"})};for(var a=0;a<this.children.length;a++)this.children[a].$.css({position:"absolute"})},p=function(){var a=this.$.height();this.bar.$.css({cursor:"col-resize",width:this.options.border,height:a});for(var b=0;b<this.children.length;b++)this.children[b].$.css({height:a})},q=function(){p.call(this);var a=!1,c=this;this.bar.$.mousedown(function(f){c.drag_start_pos_x=f.clientX;c.options_pos_init=
c.options.true_pos;a=!0;b("body").css({cursor:"col-resize"})});b(document).mousemove(function(b){a&&(c.options.true_pos=c.options_pos_init+(b.clientX-c.drag_start_pos_x),c.options.true_pos<c.options.true_pos_min?c.options.true_pos=c.options.true_pos_min:c.options.true_pos>c.options.true_pos_max&&(c.options.true_pos=c.options.true_pos_max),c.$.pixie("emit","resize"))}).mouseup(function(c){a=!1;b("body").css({cursor:""})})},r={initialized:!1,show:function(){var a=k(this.$);this.initialized||(n.call(this),
q.call(this),d(this.children),l(this.options,a.width),this.children[0].$.appendTo(this.$),this.bar.$.appendTo(this.$),this.children[1].$.appendTo(this.$),this.initialized=!0);this.children[0].$.css({width:this.options.true_pos});this.children[1].$.css({left:this.options.true_pos+this.options.border,width:a.width-this.options.true_pos-this.options.border});this.bar.$.css({left:this.options.true_pos});return this},resize:function(){p.call(this);this.show();for(var a=0;a<this.children.length;a++)this.children[a].is_pixie&&
this.children[a].$.pixie("emit","resize");return this}},a=function(){var a=this.$.width();this.bar.$.css({cursor:"row-resize",width:a,height:this.options.border});for(var b=0;b<this.children.length;b++)this.children[b].$.css({width:a})},c=function(){a.call(this);var c=!1,f=this;this.bar.$.mousedown(function(a){f.drag_start_pos_y=a.clientY;f.options_pos_init=f.options.true_pos;c=!0;b("body").css({cursor:"row-resize"})});b(document).mousemove(function(a){c&&(f.options.true_pos=f.options_pos_init+(a.clientY-
f.drag_start_pos_y),f.options.true_pos<f.options.true_pos_min?f.options.true_pos=f.options.true_pos_min:f.options.true_pos>f.options.true_pos_max&&(f.options.true_pos=f.options.true_pos_max),f.show())}).mouseup(function(a){c=!1;b("body").css({cursor:""})})},f={show:function(){var a=k(this.$);this.initialized||(n.call(this),c.call(this),d(this.children),l(this.options,a.height),this.children[0].$.appendTo(this.$),this.bar.$.appendTo(this.$),this.children[1].$.appendTo(this.$),this.initialized=!0);
this.children[0].$.css({height:this.options.true_pos});this.children[1].$.css({top:this.options.true_pos+this.options.border,height:a.height-this.options.true_pos-this.options.border});this.bar.$.css({top:this.options.true_pos});return this},resize:function(){a.call(this);this.show();for(var b=0;b<this.children.length;b++)this.children[b].is_pixie&&this.children[b].$.pixie("emit","resize");return this},initialized:!1},m={type_of:"paned",kind_of:{paned:!0},initialize:function(a){var c=g.container.apply(this);
b.extend(!0,c,m);c.options=b.extend(!0,{},e,a);"vertical"==c.options.orientation?b.extend(!0,c,r):"horizontal"==c.options.orientation?b.extend(!0,c,f):b.error("bad orientation");b(window).resize(function(){c.resize()});return c},add1:function(a){this.children[0]=h(a);return this},add2:function(a){this.children[1]=h(a);return this},position:function(a){this.options.pos=a;return this}};return function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return m.initialize.apply(this,b)}}(),
container:function(){var e={is_pixie:!0,type_of:"container",kind_of:{container:!0},initialize:function(){var d=h(this);b.extend(!0,d,e);return d},signal_showAll:function(){this.show();for(var b=0;b<this.children.length;b++)this.children[b].$.pixie("emit","showAll");return this},signal_resize:function(){this.resize();return this},children:[]};return function(b){for(var d=[],g=0;g<arguments.length;++g)d[g-0]=arguments[g];return e.initialize.apply(this,d)}}(),emit:function(){var e={showAll:function(){var b=
d(this);b.kind_of.container&&b.signal_showAll();return this},resize:function(){var b=d(this);b.kind_of.container&&b.signal_resize();return this}},g=function(d,g){for(var h=[],k=1;k<arguments.length;++k)h[k-1]=arguments[k];e[d]?e[d].apply(this,h):b.error("Signal named "+d+" not found.");return this};return function(b){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];return g.apply(this,d)}}(),atlas:function(){var d={overlap_elements:function(b,a){return[]},update_overlaps:function(b,a,c){},
initial:{scale:void 0,center:{x:void 0,y:void 0},left:void 0,top:void 0,right:void 0,bottom:void 0}},h=function(b){return{width:b.width(),height:b.height()}},l=function(b){this._=document.createElementNS("http://www.w3.org/2000/svg",b);this.attr=function(a){var b=this._;Object.keys(a).forEach(function(c){b.setAttribute(c,a[c])});return this};this.css=function(a){var b=this._;Object.keys(a).forEach(function(c){b.style[c]=a[c]});return this};this.appendTo=function(a){a instanceof jQuery?a[0].appendChild(this._):
a instanceof l&&a._.appendChild(this._);return this};this.append=function(a){a instanceof jQuery?this._.appendChild(a[0]):a instanceof l?this._.appendChild(a._):this._.appendChild(a);return this};this.empty=function(){for(var a=this._;a.firstChild;)a.removeChild(a.firstChild);return this}},k=function(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];for(var f=c=0;f<a.length;f++)"undefined"!==typeof a[f]&&c++;return c},n=function(){var d=h(this.$),a=this.options.initial,c=k(a.scale,a.left,
a.right,a.center.x),f=k(a.scale,a.top,a.bottom,a.center.y);if(2<c||2<f)b.error("too many initial parameter detected.");else if(2==c&&2==f)if(a.scale)this.scale=a.scale,this.x=a.left?a.left:a.center.x?a.center.x-d.width*a.scale/2:a.right-d.width*a.scale,this.y=a.top?a.top-d.height*a.scale:a.center.y?a.center.y-d.height*a.scale/2:a.bottom;else{var e,g;a.left&&a.right?(c=a.left,e=a.right):a.left&&a.center.x?(c=a.left,e=2*a.center.x-a.left):(c=2*a.center.x-a.right,e=a.right);g=d.width/(e-c);a.top&&a.bottom?
(f=a.top,a=a.bottom):a.top&&a.center.y?(f=a.top,a=2*a.center-a.top):(f=2*a.center-a.bottom,a=a.bottom);this.scale=Math.min(g,d.height/(f-a));g=1/this.scale;this.x=(c+e)/2-d.width*g/2;this.y=(f+a)/2-d.height*g/2}else 1==c&&2==f&&"undefined"===typeof a.scale?(a.top&&a.bottom?(c=a.top,f=a.bottom):a.top&&a.center.y?(c=a.top,f=2*a.center-a.top):(c=2*a.center-a.bottom,f=a.bottom),this.scale=d.height/(c-f),this.x=a.left?a.left:a.center.x?a.center.x-d.width*this.scale/2:a.right-d.width*this.scale):2==c&&
1==f&&"undefined"===typeof a.scale?(a.left&&a.right?(c=a.left,f=a.right):a.left&&a.center.x?(c=a.left,f=2*a.center.x-a.left):(c=2*a.center.x-a.right,f=a.right),this.scale=d.width/(f-c),this.y=a.top?a.top-d.height*this.scale:a.center.y?a.center.y-d.height*this.scale/2:a.bottom):0==c&&0==f?(this.y=this.x=0,this.scale=1):b.error("too few initial parameter detected.")},p=function(){n.call(this);var d=h(this.$);this.svg={_:(new l("svg")).attr({viewBox:"0 0 "+d.width+" "+d.height,xmlns:"http://www.w3.org/2000/svg"}).css({position:"absolute",
width:d.width,height:d.height})};this.svg.$=b(this.svg._._).appendTo(this.$);this.overlap_elements=this.options.overlap_elements(d.width,d.height);var a=this,c=!1,f=null,e=null,g=null,k=null;this.svg.$.mousedown(function(b){f=b.clientX;e=b.clientY;g=a.x;k=a.y;c=!0}).on("onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll",function(b){var c=h(a.$),d=1/a.scale,f=a.scale_base,e=1/f,g=a.x+b.clientX*d,c=a.y+(c.height-b.clientY)*d;b=b.originalEvent.deltaY?-b.originalEvent.deltaY:
b.originalEvent.wheelDelta?b.originalEvent.wheelDelta:b.originalEvent.detail;0>b?(a.scale*=e,a.x=g-(g-a.x)*f,a.y=c-(c-a.y)*f):(a.scale*=f,a.x=g-(g-a.x)*e,a.y=c-(c-a.y)*e);a.show();a.options.update_overlaps(g,c,a.scale)});b(document).mousemove(function(b){if(c){var d=b.clientY-e;a.x=g-(b.clientX-f)/a.scale;a.y=k+d/a.scale;a.show()}var d=h(a.$),m=a.scale,r=1/m;a.options.update_overlaps(a.x+b.clientX*r,a.y+(d.height-b.clientY)*r,m)}).mouseup(function(a){c=!1})},q={is_pixie:!0,type_of:"atlas",kind_of:{atlas:!0},
initialize:function(e){var a=g.container.apply(this);b.extend(!0,a,q);a.options=b.extend(!0,{},d,e);b(window).resize(function(){a.resize();return!0});return a},show:function(){this.initialized||(p.call(this),this.initialized=!0);var d=h(this.$),a=this.scale,c=1/a,c=[this.x,this.y,this.x+d.width*c,this.y+d.height*c],f=!1;if(null==this.cached_box_size)this.cached_box_size=c,f=!0;else if(c[0]<this.cached_box_size[0]||c[1]<this.cached_box_size[1]||c[2]>this.cached_box_size[2]||c[3]>this.cached_box_size[3]){for(var f=
[Math.min,Math.min,Math.max,Math.max],e=0;4>e;e++)this.cached_box_size[e]=f[e](c[e],this.cached_box_size[e]);f=!0}if(f){this.cache_id_list=this.options.listup.call.apply(this.options.listup,[].concat([this],$jscomp.arrayFromIterable(this.cached_box_size)));this.g={_:new l("g")};this.g.$=b(this.g._._);this.g._.appendTo(this.svg._.empty());this.cache_SVG_list=[];f=this.cache_id_list;for(e=0;e<f.length;e++){var g=this.options.fetch.call(this,f[e]);switch(g.type){case "circle":g={_:(new l("circle")).attr({stroke:g.stroke||
"",fill:g.fill||""}),type:"circle",cx:g.cx,cy:g.cy,r:g.r};this.cache_SVG_list[e]=g;g._.appendTo(this.g.$);break;default:b.error("unknown type "+g.type+" detected.")}}for(f=0;f<this.overlap_elements.length;f++)this.g._.append(this.overlap_elements[f])}f=this.cache_SVG_list;for(e=0;e<f.length;e++)switch(f[e].type){case "circle":f[e]._.attr({cx:(f[e].cx-c[0])*a,cy:d.height-(f[e].cy-c[1])*a,r:f[e].r*a})}return this},drop_cache:function(){this.cache_SVG_list=this.cache_id_list=this.cached_box_size=null;
return this},resize:function(){var b=h(this.$);this.svg._.attr({viewBox:"0 0 "+b.width+" "+b.height}).css({width:b.width,height:b.height});this.show.call(this);return this},initialized:!1,cached_box_size:null,scale_base:1.3};return function(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];return q.initialize.apply(this,a)}}()};b.fn.pixie=function(d,h){for(var e=[],k=1;k<arguments.length;++k)e[k-1]=arguments[k];if(g[d])return g[d].apply(this,e);b.error("Widget named "+d+" not found.")};
b(".pixie-widget").hide()})(jQuery);
