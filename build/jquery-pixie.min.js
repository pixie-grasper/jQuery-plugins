var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,k,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[k]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var k=0;return $jscomp.iteratorPrototype(function(){return k<b.length?{done:!1,value:b[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var k=b[Symbol.iterator];return k?k.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var k,c=[];!(k=b.next()).done;)c.push(k.value);return c};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(b,k){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var c=0,g={next:function(){if(c<b.length){var e=c++;return{value:k(e,b[e]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill=function(b,k,c,g){if(k){c=$jscomp.global;b=b.split(".");for(g=0;g<b.length-1;g++){var e=b[g];e in c||(c[e]={});c=c[e]}b=b[b.length-1];g=c[b];k=k(g);k!=g&&null!=k&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,c,g){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==g||g>e)g=e;g=Number(g);0>g&&(g=Math.max(0,e+g));for(c=Number(c||0);c<g;c++)this[c]=b;return this}},"es6-impl","es3");
(function(b){var k=function(e){"string"===typeof e&&(e=b(e));0==e.length?b.error("bad selector (selected no elements)."):1<e.length&&b.error("bad selector (selected two or more elements).");if(e[0].as_pixie)return e[0].as_pixie;var c={$:e,kind_of:{}};return e[0].as_pixie=c},c=function(e){0==e.length?b.error("bad selector (selected no elements)."):1<e.length&&b.error("bad selector (selected two or more elements).");return e[0].as_pixie},g={paned:function(){var e={border:5,pos:"50%",pos_min:"10%",pos_max:"90% - 5",
color:"lightgray"},c=function(a){for(var l=0;l<a.length;l++)a[l].$.detach()},n=function(a,f){"string"===typeof a.pos&&a.pos.match(/%/)?a.true_pos=eval(a.pos.replace(/%/," / 100 * "+f)):a.true_pos=a.pos;"string"===typeof a.pos_min&&a.pos_min.match(/%/)?a.true_pos_min=eval(a.pos_min.replace(/%/," / 100 * "+f)):a.true_pos_min=a.pos_min;"string"===typeof a.pos_max&&a.pos_max.match(/%/)?a.true_pos_max=eval(a.pos_max.replace(/%/," / 100 * "+f)):a.true_pos_max=a.pos_max},m=function(a){return{width:a.width(),
height:a.height()}},p=function(){this.bar={$:b("<div></div>").css({backgroundColor:this.options.color,position:"absolute"})};for(var a=0;a<this.children.length;a++)this.children[a].$.css({position:"absolute"})},u=function(){var a=this.$.height();this.bar.$.css({cursor:"col-resize",width:this.options.border,height:a});for(var f=0;f<this.children.length;f++)this.children[f].$.css({height:a})},w=function(){u.call(this);var a=!1,f=this;this.bar.$.mousedown(function(l){f.drag_start_pos_x=l.clientX;f.options_pos_init=
f.options.true_pos;a=!0;b("body").css({cursor:"col-resize"})});b(document).mousemove(function(b){a&&(f.options.true_pos=f.options_pos_init+(b.clientX-f.drag_start_pos_x),f.options.true_pos<f.options.true_pos_min?f.options.true_pos=f.options.true_pos_min:f.options.true_pos>f.options.true_pos_max&&(f.options.true_pos=f.options.true_pos_max),f.$.pixie("emit","resize"))}).mouseup(function(f){a=!1;b("body").css({cursor:""})})},v={initialized:!1,show:function(){var a=m(this.$);this.initialized||(p.call(this),
w.call(this),c(this.children),n(this.options,a.width),this.children[0].$.appendTo(this.$),this.bar.$.appendTo(this.$),this.children[1].$.appendTo(this.$),this.initialized=!0);this.children[0].$.css({width:this.options.true_pos});this.children[1].$.css({left:this.options.true_pos+this.options.border,width:a.width-this.options.true_pos-this.options.border});this.bar.$.css({left:this.options.true_pos});return this},resize:function(){u.call(this);this.show();for(var a=0;a<this.children.length;a++)this.children[a].is_pixie&&
this.children[a].$.pixie("emit","resize");return this}},q=function(){var a=this.$.width();this.bar.$.css({cursor:"row-resize",width:a,height:this.options.border});for(var b=0;b<this.children.length;b++)this.children[b].$.css({width:a})},a=function(){q.call(this);var a=!1,f=this;this.bar.$.mousedown(function(d){f.drag_start_pos_y=d.clientY;f.options_pos_init=f.options.true_pos;a=!0;b("body").css({cursor:"row-resize"})});b(document).mousemove(function(b){a&&(f.options.true_pos=f.options_pos_init+(b.clientY-
f.drag_start_pos_y),f.options.true_pos<f.options.true_pos_min?f.options.true_pos=f.options.true_pos_min:f.options.true_pos>f.options.true_pos_max&&(f.options.true_pos=f.options.true_pos_max),f.show())}).mouseup(function(f){a=!1;b("body").css({cursor:""})})},d={show:function(){var b=m(this.$);this.initialized||(p.call(this),a.call(this),c(this.children),n(this.options,b.height),this.children[0].$.appendTo(this.$),this.bar.$.appendTo(this.$),this.children[1].$.appendTo(this.$),this.initialized=!0);
this.children[0].$.css({height:this.options.true_pos});this.children[1].$.css({top:this.options.true_pos+this.options.border,height:b.height-this.options.true_pos-this.options.border});this.bar.$.css({top:this.options.true_pos});return this},resize:function(){q.call(this);this.show();for(var a=0;a<this.children.length;a++)this.children[a].is_pixie&&this.children[a].$.pixie("emit","resize");return this},initialized:!1},h={type_of:"paned",kind_of:{paned:!0},initialize:function(a){var f=g.container.apply(this);
b.extend(!0,f,h);f.options=b.extend(!0,{},e,a);"vertical"==f.options.orientation?b.extend(!0,f,v):"horizontal"==f.options.orientation?b.extend(!0,f,d):b.error("bad orientation");b(window).resize(function(){f.resize()});return f},add1:function(a){this.children[0]=k(a);return this},add2:function(a){this.children[1]=k(a);return this},position:function(a){this.options.pos=a;return this}};return function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];return h.initialize.apply(this,b)}}(),
container:function(){var e={is_pixie:!0,type_of:"container",kind_of:{container:!0},initialize:function(){var c=k(this);b.extend(!0,c,e);return c},signal_showAll:function(){this.show();for(var b=0;b<this.children.length;b++)this.children[b].$.pixie("emit","showAll");return this},signal_resize:function(){this.resize();return this},children:[]};return function(b){for(var c=[],g=0;g<arguments.length;++g)c[g-0]=arguments[g];return e.initialize.apply(this,c)}}(),emit:function(){var e={showAll:function(){var b=
c(this);b.kind_of.container&&b.signal_showAll();return this},resize:function(){var b=c(this);b.kind_of.container&&b.signal_resize();return this}},g=function(c,g){for(var k=[],m=1;m<arguments.length;++m)k[m-1]=arguments[m];e[c]?e[c].apply(this,k):b.error("Signal named "+c+" not found.");return this};return function(b){for(var c=[],e=0;e<arguments.length;++e)c[e-0]=arguments[e];return g.apply(this,c)}}(),atlas:function(){var c={overlap_elements:function(b){},update_overlaps:function(b,a,d){},initial:{scale:void 0,
center:{x:void 0,y:void 0},left:void 0,top:void 0,right:void 0,bottom:void 0},scale_base:1.3},k=function(){for(var b=[],a="vss vskip vkern hss hskip hkern box".split(" "),d=0;d<a.length;d++)this[a[d]]=function(f){return function(d){for(var h=[],c=0;c<arguments.length;++c)h[c-0]=arguments[c];b.push({command:a[f],args:h});return this}}(d);var h,c;this.load=function(){h=[];c=[];for(var a=[],d=0;d<b.length;d++)switch(b[d].command){case "vss":case "vskip":case "vkern":0!=a.length&&(h.push([0,a]),a=[]);
h.push([1,b[d]]);break;case "hss":case "hskip":case "hkern":a.push(b[d]);break;case "box":a.push(b[d]),c.push(b[d])}0!=a.length&&h.push([0,a]);return this};this.show=function(a,b,d){if(!a._.firstChild){c||this.load();for(var f=0;f<c.length;f++)a.append(c[f].args[0])}for(var q=0,e=f=a=0;e<h.length;e++){var g=h[e];if(0==g[0]){for(var l=g[1],k=0,r=0,m=0,n=0,p=0;p<l.length;p++){var t=l[p];switch(t.command){case "hss":m++;break;case "hskip":n++;k+=t.args[0];break;case "hkern":k+=t.args[0];break;case "box":k+=
t.args[0].prop("scrollWidth"),r=Math.max(r,t.args[0].prop("scrollHeight"))}}0!=m&&(n=0);g[2]={badness:b-k,height:r,count_hss:m,count_hskip:n};q+=r}else switch(g[1].command){case "vss":a++;break;case "vskip":f++;q+=g[1].args[0];break;case "vkern":q+=g[1].args[0]}}0!=a&&(f=0);b=d-q;for(q=d=0;q<h.length;q++)if(l=h[q],0==l[0])for(e=0,g=l[1],l=l[2],k=0;k<g.length;k++)switch(r=g[k],r.command){case "hss":0!=l.count_hss&&(e+=l.badness/l.count_hss);break;case "hskip":0!=l.count_hskip&&(e+=l.badness/l.count_hskip);
e+=r.args[0];break;case "hkern":e+=r.args[0];break;case "box":r.args[0].attr({x:e,y:d+l.height}),e+=r.args[0].prop("scrollWidth")}else switch(l[1].command){case "vss":0!=a&&(d+=b/a);break;case "vskip":0!=f&&(d+=b/f);d+=l[1].args[0];break;case "vkern":d+=l[1].args[0]}return this}},n=function(b){return{width:b.width(),height:b.height()}},m=function(b){this._=document.createElementNS("http://www.w3.org/2000/svg",b);this.attr=function(a){var b=this._;Object.keys(a).forEach(function(d){a[d]&&""!=a[d]?
b.setAttribute(d,a[d]):b.removeAttribute(d)});return this};this.css=function(a){var b=this._;Object.keys(a).forEach(function(d){b.style[d]=a[d]});return this};this.appendTo=function(a){a instanceof jQuery?a[0].appendChild(this._):a instanceof m&&a._.appendChild(this._);return this};this.append=function(a){a instanceof jQuery?this._.appendChild(a[0]):a instanceof m?this._.appendChild(a._):this._.appendChild(a);return this};this.empty=function(){for(var a=this._;a.firstChild;)a.removeChild(a.firstChild);
return this}},p=function(b){for(var a=[],d=0;d<arguments.length;++d)a[d-0]=arguments[d];for(var c=d=0;c<a.length;c++)"undefined"!==typeof a[c]&&d++;return d},u=function(){var c=n(this.$),a=this.options.initial,d=p(a.scale,a.left,a.right,a.center.x),h=p(a.scale,a.top,a.bottom,a.center.y);if(2<d||2<h)b.error("too many initial parameter detected.");else if(2==d&&2==h)if(a.scale)this.scale=a.scale,this.x=a.left?a.left:a.center.x?a.center.x-c.width*a.scale/2:a.right-c.width*a.scale,this.y=a.top?a.top-
c.height*a.scale:a.center.y?a.center.y-c.height*a.scale/2:a.bottom;else{var e,f;a.left&&a.right?(d=a.left,e=a.right):a.left&&a.center.x?(d=a.left,e=2*a.center.x-a.left):(d=2*a.center.x-a.right,e=a.right);f=c.width/(e-d);a.top&&a.bottom?(h=a.top,a=a.bottom):a.top&&a.center.y?(h=a.top,a=2*a.center-a.top):(h=2*a.center-a.bottom,a=a.bottom);this.scale=Math.min(f,c.height/(h-a));f=1/this.scale;this.x=(d+e)/2-c.width*f/2;this.y=(h+a)/2-c.height*f/2}else 1==d&&2==h&&"undefined"===typeof a.scale?(a.top&&
a.bottom?(d=a.top,h=a.bottom):a.top&&a.center.y?(d=a.top,h=2*a.center-a.top):(d=2*a.center-a.bottom,h=a.bottom),this.scale=c.height/(d-h),this.x=a.left?a.left:a.center.x?a.center.x-c.width*this.scale/2:a.right-c.width*this.scale):2==d&&1==h&&"undefined"===typeof a.scale?(a.left&&a.right?(d=a.left,h=a.right):a.left&&a.center.x?(d=a.left,h=2*a.center.x-a.left):(d=2*a.center.x-a.right,h=a.right),this.scale=c.width/(h-d),this.y=a.top?a.top-c.height*this.scale:a.center.y?a.center.y-c.height*this.scale/
2:a.bottom):0==d&&0==h?(this.y=this.x=0,this.scale=1):b.error("too few initial parameter detected.")},w=function(){u.call(this);var c=n(this.$);this.svg={_:(new m("svg")).attr({viewBox:"0 0 "+c.width+" "+c.height,xmlns:"http://www.w3.org/2000/svg"}).css({position:"absolute",width:c.width,height:c.height})};this.svg.$=b(this.svg._._).appendTo(this.$);this.overlap_elements=new k;this.options.overlap_elements(this.overlap_elements);this.overlap_elements.load();var a=this,d=!1,e=null,g=null,f=null,p=
null;this.svg.$.mousedown(function(c){var h=n(a.$),l=1/a.scale;e=c.clientX;g=c.clientY;f=a.x+h.width*l;p=a.y+h.height*l;c=b("body")[0].style;c.cursor="grabbing";""==c.cursor&&(c.cursor="-moz-grabbing",""==c.cursor&&(c.cursor="-webkit-grabbing"));d=!0}).on("onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll",function(b){var d=n(a.$),c=1/a.scale,f=a.options.scale_base,e=1/f,h=a.x+b.clientX*c,d=a.y+(d.height-b.clientY)*c;b=b.originalEvent.deltaY?-b.originalEvent.deltaY:
b.originalEvent.wheelDelta?b.originalEvent.wheelDelta:b.originalEvent.detail;0>b?a.zoom(h,d,f):a.zoom(h,d,e);a.show();a.update_overlaps(h,d)});b(document).mousemove(function(b){var c=1/a.scale;d&&a.moveto(f-(b.clientX-e)*c,p+(b.clientY-g)*c);var h=n(a.$);a.update_overlaps(a.x+b.clientX*c,a.y+(h.height-b.clientY)*c)}).mouseup(function(a){b("body").css({cursor:""});d=!1})},v={is_pixie:!0,type_of:"atlas",kind_of:{atlas:!0},initialize:function(e){var a=g.container.apply(this);b.extend(!0,a,v);a.options=
b.extend(!0,{},c,e);b(window).resize(function(){a.resize();return!0});return a},show:function(){this.initialized||(w.call(this),this.initialized=!0);var c=n(this.$),a=this.scale,d=1/a,d=[this.x,this.y,this.x+c.width*d,this.y+c.height*d],e=!1;if(null==this.cached_box_size)this.cached_box_size=d,e=!0;else if(d[0]<this.cached_box_size[0]||d[1]<this.cached_box_size[1]||d[2]>this.cached_box_size[2]||d[3]>this.cached_box_size[3]){for(var e=[Math.min,Math.min,Math.max,Math.max],g=0;4>g;g++)this.cached_box_size[g]=
e[g](d[g],this.cached_box_size[g]);e=!0}if(e){this.cache_id_list=this.options.listup.call.apply(this.options.listup,[].concat([this],$jscomp.arrayFromIterable(this.cached_box_size)));this.g={_:new m("g")};this.g.$=b(this.g._._);this.g._.appendTo(this.svg._.empty());this.cache_SVG_list=[];e=this.cache_id_list;for(g=0;g<e.length;g++){var f=this.options.fetch.call(this,e[g]);switch(f.type){case "circle":f={_:(new m("circle")).attr({stroke:f.stroke,fill:f.fill}),type:"circle",cx:f.cx,cy:f.cy,r:f.r};this.cache_SVG_list[g]=
f;f._.appendTo(this.g.$);break;default:b.error("unknown type "+f.type+" detected.")}}this.g2={_:new m("g")};this.g2._.appendTo(this.svg._);this.overlap_elements.show(this.g2._,c.width,c.height)}e=this.cache_SVG_list;for(g=0;g<e.length;g++)switch(e[g].type){case "circle":e[g]._.attr({cx:(e[g].cx-d[0])*a,cy:c.height-(e[g].cy-d[1])*a,r:e[g].r*a})}return this},drop_cache:function(){this.cache_SVG_list=this.cache_id_list=this.cached_box_size=null;return this},resize:function(){var b=n(this.$);this.svg._.attr({viewBox:"0 0 "+
b.width+" "+b.height}).css({width:b.width,height:b.height});this.show.call(this);return this},zoom:function(b,a,c){this.scale/=c;this.x=b-(b-this.x)*c;this.y=a-(a-this.y)*c;return this},moveto:function(b,a){var c=n(this.$),e=1/this.scale;this.x=b-c.width*e;this.y=a-c.height*e;this.show();return this},update_overlaps:function(b,a){var c=n(this.$);this.options.update_overlaps(b,a,this.scale);this.overlap_elements.show(this.g2._,c.width,c.height);return this},initialized:!1,cached_box_size:null};return function(b){for(var a=
[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];return v.initialize.apply(this,a)}}()};b.fn.pixie=function(c,k){for(var e=[],m=1;m<arguments.length;++m)e[m-1]=arguments[m];if(g[c])return g[c].apply(this,e);b.error("Widget named "+c+" not found.")};b(".pixie-widget").hide()})(jQuery);
