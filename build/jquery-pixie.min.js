var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,k,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[k]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var k=0;return $jscomp.iteratorPrototype(function(){return k<b.length?{done:!1,value:b[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var k=b[Symbol.iterator];return k?k.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var k,c=[];!(k=b.next()).done;)c.push(k.value);return c};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(b,k){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var c=0,h={next:function(){if(c<b.length){var d=c++;return{value:k(d,b[d]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(b,k,c,h){if(k){c=$jscomp.global;b=b.split(".");for(h=0;h<b.length-1;h++){var d=b[h];d in c||(c[d]={});c=c[d]}b=b[b.length-1];h=c[b];k=k(h);k!=h&&null!=k&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,c,h){var d=this.length||0;0>c&&(c=Math.max(0,d+c));if(null==h||h>d)h=d;h=Number(h);0>h&&(h=Math.max(0,d+h));for(c=Number(c||0);c<h;c++)this[c]=b;return this}},"es6-impl","es3");
(function(b){var k=function(d){"string"===typeof d&&(d=b(d));0==d.length?b.error("bad selector (selected no elements)."):1<d.length&&b.error("bad selector (selected two or more elements).");if(d[0].as_pixie)return d[0].as_pixie;var c={$:d,kind_of:{}};return d[0].as_pixie=c},c=function(d){0==d.length?b.error("bad selector (selected no elements)."):1<d.length&&b.error("bad selector (selected two or more elements).");return d[0].as_pixie},h={paned:function(){var d={border:5,pos:"50%",pos_min:"10%",pos_max:"90% - 5",
color:"lightgray"},c=function(a){for(var g=0;g<a.length;g++)a[g].$.detach()},m=function(a,e){"string"===typeof a.pos&&a.pos.match(/%/)?a.true_pos=eval(a.pos.replace(/%/," / 100 * "+e)):a.true_pos=a.pos;"string"===typeof a.pos_min&&a.pos_min.match(/%/)?a.true_pos_min=eval(a.pos_min.replace(/%/," / 100 * "+e)):a.true_pos_min=a.pos_min;"string"===typeof a.pos_max&&a.pos_max.match(/%/)?a.true_pos_max=eval(a.pos_max.replace(/%/," / 100 * "+e)):a.true_pos_max=a.pos_max},l=function(a){return{width:a.width(),
height:a.height()}},q=function(){this.bar={$:b("<div></div>").css({backgroundColor:this.options.color,position:"absolute"})};for(var a=0;a<this.children.length;a++)this.children[a].$.css({position:"absolute"})},t=function(){var a=this.$.height();this.bar.$.css({cursor:"col-resize",width:this.options.border,height:a});for(var e=0;e<this.children.length;e++)this.children[e].$.css({height:a})},v=function(){t.call(this);var a=!1,e=this;this.bar.$.mousedown(function(g){e.drag_start_pos_x=g.clientX;e.options_pos_init=
e.options.true_pos;a=!0;b("body").css({cursor:"col-resize"})});b(document).mousemove(function(b){a&&(e.options.true_pos=e.options_pos_init+(b.clientX-e.drag_start_pos_x),e.options.true_pos<e.options.true_pos_min?e.options.true_pos=e.options.true_pos_min:e.options.true_pos>e.options.true_pos_max&&(e.options.true_pos=e.options.true_pos_max),e.$.pixie("emit","resize"))}).mouseup(function(e){a=!1;b("body").css({cursor:""})})},u={initialized:!1,show:function(){var a=l(this.$);this.initialized||(q.call(this),
v.call(this),c(this.children),m(this.options,a.width),this.children[0].$.appendTo(this.$),this.bar.$.appendTo(this.$),this.children[1].$.appendTo(this.$),this.initialized=!0);this.children[0].$.css({width:this.options.true_pos});this.children[1].$.css({left:this.options.true_pos+this.options.border,width:a.width-this.options.true_pos-this.options.border});this.bar.$.css({left:this.options.true_pos});return this},resize:function(){t.call(this);this.show();for(var a=0;a<this.children.length;a++)this.children[a].is_pixie&&
this.children[a].$.pixie("emit","resize");return this}},n=function(){var a=this.$.width();this.bar.$.css({cursor:"row-resize",width:a,height:this.options.border});for(var e=0;e<this.children.length;e++)this.children[e].$.css({width:a})},a=function(){n.call(this);var a=!1,e=this;this.bar.$.mousedown(function(f){e.drag_start_pos_y=f.clientY;e.options_pos_init=e.options.true_pos;a=!0;b("body").css({cursor:"row-resize"})});b(document).mousemove(function(b){a&&(e.options.true_pos=e.options_pos_init+(b.clientY-
e.drag_start_pos_y),e.options.true_pos<e.options.true_pos_min?e.options.true_pos=e.options.true_pos_min:e.options.true_pos>e.options.true_pos_max&&(e.options.true_pos=e.options.true_pos_max),e.show())}).mouseup(function(e){a=!1;b("body").css({cursor:""})})},f={show:function(){var b=l(this.$);this.initialized||(q.call(this),a.call(this),c(this.children),m(this.options,b.height),this.children[0].$.appendTo(this.$),this.bar.$.appendTo(this.$),this.children[1].$.appendTo(this.$),this.initialized=!0);
this.children[0].$.css({height:this.options.true_pos});this.children[1].$.css({top:this.options.true_pos+this.options.border,height:b.height-this.options.true_pos-this.options.border});this.bar.$.css({top:this.options.true_pos});return this},resize:function(){n.call(this);this.show();for(var a=0;a<this.children.length;a++)this.children[a].is_pixie&&this.children[a].$.pixie("emit","resize");return this},initialized:!1},p={type_of:"paned",kind_of:{paned:!0},initialize:function(a){var e=h.container.apply(this);
b.extend(!0,e,p);e.options=b.extend(!0,{},d,a);"vertical"==e.options.orientation?b.extend(!0,e,u):"horizontal"==e.options.orientation?b.extend(!0,e,f):b.error("bad orientation");b(window).resize(function(){e.resize()});return e},add1:function(a){this.children[0]=k(a);return this},add2:function(a){this.children[1]=k(a);return this},position:function(a){this.options.pos=a;return this}};return function(a){for(var b=[],f=0;f<arguments.length;++f)b[f-0]=arguments[f];return p.initialize.apply(this,b)}}(),
container:function(){var d={is_pixie:!0,type_of:"container",kind_of:{container:!0},initialize:function(){var c=k(this);b.extend(!0,c,d);return c},signal_showAll:function(){this.show();for(var b=0;b<this.children.length;b++)this.children[b].$.pixie("emit","showAll");return this},signal_resize:function(){this.resize();return this},children:[]};return function(b){for(var c=[],h=0;h<arguments.length;++h)c[h-0]=arguments[h];return d.initialize.apply(this,c)}}(),emit:function(){var d={showAll:function(){var b=
c(this);b.kind_of.container&&b.signal_showAll();return this},resize:function(){var b=c(this);b.kind_of.container&&b.signal_resize();return this}},h=function(c,h){for(var k=[],l=1;l<arguments.length;++l)k[l-1]=arguments[l];d[c]?d[c].apply(this,k):b.error("Signal named "+c+" not found.");return this};return function(b){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];return h.apply(this,c)}}(),atlas:function(){var c={overlap_elements:function(b){},update_overlaps:function(b,a,f){},initial:{scale:void 0,
center:{x:void 0,y:void 0},left:void 0,top:void 0,right:void 0,bottom:void 0}},k=function(){for(var b=[],a="vss vskip vkern hss hskip hkern box".split(" "),f=0;f<a.length;f++)this[a[f]]=function(e){return function(f){for(var c=[],p=0;p<arguments.length;++p)c[p-0]=arguments[p];b.push({command:a[e],args:c});return this}}(f);var p=[],c;this.load=function(){c=[];for(var a=[],f=0;f<b.length;f++)switch(b[f].command){case "vss":case "vskip":case "vkern":0!=a.length&&(c.push([0,a]),a=[]);c.push([1,b[f]]);
break;case "hss":case "hskip":case "hkern":a.push(b[f]);break;case "box":a.push(b[f]),p.push(b[f])}0!=a.length&&c.push([0,a]);return this};this.show=function(a,b,f){if(!a._.firstChild)for(var e=0;e<p.length;e++)a.append(p[e].args[0]);for(var n=0,d=e=a=0;d<c.length;d++){var h=c[d];if(0==h[0]){for(var g=h[1],k=0,l=0,w=0,m=0,q=0;q<g.length;q++){var r=g[q];switch(r.command){case "hss":w++;break;case "hskip":m++;k+=r.args[0];break;case "hkern":k+=r.args[0];break;case "box":k+=r.args[0].prop("scrollWidth"),
l=Math.max(l,r.args[0].prop("scrollHeight"))}}0!=w&&(m=0);h[2]={badness:b-k,height:l,count_hss:w,count_hskip:m};n+=l}else switch(h[1].command){case "vss":a++;break;case "vskip":e++;n+=h[1].args[0];break;case "vkern":n+=h[1].args[0]}}0!=a&&(e=0);b=f-n;for(n=f=0;n<c.length;n++)if(g=c[n],0==g[0])for(d=0,h=g[1],g=g[2],k=0;k<h.length;k++)switch(l=h[k],l.command){case "hss":0!=g.count_hss&&(d+=g.badness/g.count_hss);break;case "hskip":0!=g.count_hskip&&(d+=g.badness/g.count_hskip);d+=l.args[0];break;case "hkern":d+=
l.args[0];break;case "box":l.args[0].attr({x:d,y:f+g.height}),d+=l.args[0].prop("scrollWidth")}else switch(g[1].command){case "vss":0!=a&&(f+=b/a);break;case "vskip":0!=e&&(f+=b/e);f+=g[1].args[0];break;case "vkern":f+=g[1].args[0]}return this}},m=function(b){return{width:b.width(),height:b.height()}},l=function(b){this._=document.createElementNS("http://www.w3.org/2000/svg",b);this.attr=function(a){var b=this._;Object.keys(a).forEach(function(f){b.setAttribute(f,a[f])});return this};this.css=function(a){var b=
this._;Object.keys(a).forEach(function(f){b.style[f]=a[f]});return this};this.appendTo=function(a){a instanceof jQuery?a[0].appendChild(this._):a instanceof l&&a._.appendChild(this._);return this};this.append=function(a){a instanceof jQuery?this._.appendChild(a[0]):a instanceof l?this._.appendChild(a._):this._.appendChild(a);return this};this.empty=function(){for(var a=this._;a.firstChild;)a.removeChild(a.firstChild);return this}},q=function(b){for(var a=[],f=0;f<arguments.length;++f)a[f-0]=arguments[f];
for(var c=f=0;c<a.length;c++)"undefined"!==typeof a[c]&&f++;return f},t=function(){var c=m(this.$),a=this.options.initial,f=q(a.scale,a.left,a.right,a.center.x),d=q(a.scale,a.top,a.bottom,a.center.y);if(2<f||2<d)b.error("too many initial parameter detected.");else if(2==f&&2==d)if(a.scale)this.scale=a.scale,this.x=a.left?a.left:a.center.x?a.center.x-c.width*a.scale/2:a.right-c.width*a.scale,this.y=a.top?a.top-c.height*a.scale:a.center.y?a.center.y-c.height*a.scale/2:a.bottom;else{var g,e;a.left&&
a.right?(f=a.left,g=a.right):a.left&&a.center.x?(f=a.left,g=2*a.center.x-a.left):(f=2*a.center.x-a.right,g=a.right);e=c.width/(g-f);a.top&&a.bottom?(d=a.top,a=a.bottom):a.top&&a.center.y?(d=a.top,a=2*a.center-a.top):(d=2*a.center-a.bottom,a=a.bottom);this.scale=Math.min(e,c.height/(d-a));e=1/this.scale;this.x=(f+g)/2-c.width*e/2;this.y=(d+a)/2-c.height*e/2}else 1==f&&2==d&&"undefined"===typeof a.scale?(a.top&&a.bottom?(f=a.top,d=a.bottom):a.top&&a.center.y?(f=a.top,d=2*a.center-a.top):(f=2*a.center-
a.bottom,d=a.bottom),this.scale=c.height/(f-d),this.x=a.left?a.left:a.center.x?a.center.x-c.width*this.scale/2:a.right-c.width*this.scale):2==f&&1==d&&"undefined"===typeof a.scale?(a.left&&a.right?(f=a.left,d=a.right):a.left&&a.center.x?(f=a.left,d=2*a.center.x-a.left):(f=2*a.center.x-a.right,d=a.right),this.scale=c.width/(d-f),this.y=a.top?a.top-c.height*this.scale:a.center.y?a.center.y-c.height*this.scale/2:a.bottom):0==f&&0==d?(this.y=this.x=0,this.scale=1):b.error("too few initial parameter detected.")},
v=function(){t.call(this);var c=m(this.$);this.svg={_:(new l("svg")).attr({viewBox:"0 0 "+c.width+" "+c.height,xmlns:"http://www.w3.org/2000/svg"}).css({position:"absolute",width:c.width,height:c.height})};this.svg.$=b(this.svg._._).appendTo(this.$);this.overlap_elements=new k;this.options.overlap_elements(this.overlap_elements);this.overlap_elements.load();var a=this,f=!1,d=null,g=null,e=null,h=null;this.svg.$.mousedown(function(b){d=b.clientX;g=b.clientY;e=a.x;h=a.y;f=!0}).on("onwheel"in document?
"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll",function(b){var f=m(a.$),c=1/a.scale,e=a.scale_base,d=1/e,g=a.x+b.clientX*c,f=a.y+(f.height-b.clientY)*c;b=b.originalEvent.deltaY?-b.originalEvent.deltaY:b.originalEvent.wheelDelta?b.originalEvent.wheelDelta:b.originalEvent.detail;0>b?(a.scale*=d,a.x=g-(g-a.x)*e,a.y=f-(f-a.y)*e):(a.scale*=e,a.x=g-(g-a.x)*d,a.y=f-(f-a.y)*d);a.show();a.update_overlaps(g,f)});b(document).mousemove(function(b){if(f){var c=b.clientY-g;a.x=e-(b.clientX-d)/
a.scale;a.y=h+c/a.scale;a.show()}var c=m(a.$),k=1/a.scale;a.update_overlaps(a.x+b.clientX*k,a.y+(c.height-b.clientY)*k)}).mouseup(function(a){f=!1})},u={is_pixie:!0,type_of:"atlas",kind_of:{atlas:!0},initialize:function(d){var a=h.container.apply(this);b.extend(!0,a,u);a.options=b.extend(!0,{},c,d);b(window).resize(function(){a.resize();return!0});return a},show:function(){this.initialized||(v.call(this),this.initialized=!0);var c=m(this.$),a=this.scale,f=1/a,f=[this.x,this.y,this.x+c.width*f,this.y+
c.height*f],d=!1;if(null==this.cached_box_size)this.cached_box_size=f,d=!0;else if(f[0]<this.cached_box_size[0]||f[1]<this.cached_box_size[1]||f[2]>this.cached_box_size[2]||f[3]>this.cached_box_size[3]){for(var d=[Math.min,Math.min,Math.max,Math.max],g=0;4>g;g++)this.cached_box_size[g]=d[g](f[g],this.cached_box_size[g]);d=!0}if(d){this.cache_id_list=this.options.listup.call.apply(this.options.listup,[].concat([this],$jscomp.arrayFromIterable(this.cached_box_size)));this.g={_:new l("g")};this.g.$=
b(this.g._._);this.g._.appendTo(this.svg._.empty());this.cache_SVG_list=[];d=this.cache_id_list;for(g=0;g<d.length;g++){var e=this.options.fetch.call(this,d[g]);switch(e.type){case "circle":e={_:(new l("circle")).attr({stroke:e.stroke||"",fill:e.fill||""}),type:"circle",cx:e.cx,cy:e.cy,r:e.r};this.cache_SVG_list[g]=e;e._.appendTo(this.g.$);break;default:b.error("unknown type "+e.type+" detected.")}}this.g2={_:new l("g")};this.g2._.appendTo(this.svg._);this.overlap_elements.show(this.g2._,c.width,
c.height)}d=this.cache_SVG_list;for(g=0;g<d.length;g++)switch(d[g].type){case "circle":d[g]._.attr({cx:(d[g].cx-f[0])*a,cy:c.height-(d[g].cy-f[1])*a,r:d[g].r*a})}return this},drop_cache:function(){this.cache_SVG_list=this.cache_id_list=this.cached_box_size=null;return this},resize:function(){var b=m(this.$);this.svg._.attr({viewBox:"0 0 "+b.width+" "+b.height}).css({width:b.width,height:b.height});this.show.call(this);return this},update_overlaps:function(b,a){var c=m(this.$);this.options.update_overlaps(b,
a,this.scale);this.overlap_elements.show(this.g2._,c.width,c.height)},initialized:!1,cached_box_size:null,scale_base:1.3};return function(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];return u.initialize.apply(this,a)}}()};b.fn.pixie=function(c,k){for(var d=[],l=1;l<arguments.length;++l)d[l-1]=arguments[l];if(h[c])return h[c].apply(this,d);b.error("Widget named "+c+" not found.")};b(".pixie-widget").hide()})(jQuery);
