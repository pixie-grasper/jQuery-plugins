var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,k,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[k]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var k=0;return $jscomp.iteratorPrototype(function(){return k<b.length?{done:!1,value:b[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var k=b[Symbol.iterator];return k?k.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var k,c=[];!(k=b.next()).done;)c.push(k.value);return c};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(b,k){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var c=0,g={next:function(){if(c<b.length){var f=c++;return{value:k(f,b[f]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill=function(b,k,c,g){if(k){c=$jscomp.global;b=b.split(".");for(g=0;g<b.length-1;g++){var f=b[g];f in c||(c[f]={});c=c[f]}b=b[b.length-1];g=c[b];k=k(g);k!=g&&null!=k&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,c,g){var f=this.length||0;0>c&&(c=Math.max(0,f+c));if(null==g||g>f)g=f;g=Number(g);0>g&&(g=Math.max(0,f+g));for(c=Number(c||0);c<g;c++)this[c]=b;return this}},"es6-impl","es3");
(function(b){var k=function(f){"string"===typeof f&&(f=b(f));0==f.length?b.error("bad selector (selected no elements)."):1<f.length&&b.error("bad selector (selected two or more elements).");if(f[0].as_pixie)return f[0].as_pixie;var c={$:f,kind_of:{}};return f[0].as_pixie=c},c=function(f){0==f.length?b.error("bad selector (selected no elements)."):1<f.length&&b.error("bad selector (selected two or more elements).");return f[0].as_pixie},g={paned:function(){var f={border:5,pos:"50%",pos_min:"10%",pos_max:"90% - 5",
color:"lightgray"},c=function(a){for(var m=0;m<a.length;m++)a[m].$.detach()},n=function(a,d){"string"===typeof a.pos&&a.pos.match(/%/)?a.true_pos=eval(a.pos.replace(/%/," / 100 * "+d)):a.true_pos=a.pos;"string"===typeof a.pos_min&&a.pos_min.match(/%/)?a.true_pos_min=eval(a.pos_min.replace(/%/," / 100 * "+d)):a.true_pos_min=a.pos_min;"string"===typeof a.pos_max&&a.pos_max.match(/%/)?a.true_pos_max=eval(a.pos_max.replace(/%/," / 100 * "+d)):a.true_pos_max=a.pos_max},l=function(a){return{width:a.width(),
height:a.height()}},p=function(){this.bar={$:b("<div></div>").css({backgroundColor:this.options.color,position:"absolute"})};for(var a=0;a<this.children.length;a++)this.children[a].$.css({position:"absolute"})},t=function(){var a=this.$.height();this.bar.$.css({cursor:"col-resize",width:this.options.border,height:a});for(var d=0;d<this.children.length;d++)this.children[d].$.css({height:a})},v=function(){t.call(this);var a=!1,d=this;this.bar.$.mousedown(function(m){d.drag_start_pos_x=m.clientX;d.options_pos_init=
d.options.true_pos;a=!0;b("body").css({cursor:"col-resize"})});b(document).mousemove(function(b){a&&(d.options.true_pos=d.options_pos_init+(b.clientX-d.drag_start_pos_x),d.options.true_pos<d.options.true_pos_min?d.options.true_pos=d.options.true_pos_min:d.options.true_pos>d.options.true_pos_max&&(d.options.true_pos=d.options.true_pos_max),d.$.pixie("emit","resize"))}).mouseup(function(d){a=!1;b("body").css({cursor:""})})},u={initialized:!1,show:function(){var a=l(this.$);this.initialized||(p.call(this),
v.call(this),c(this.children),n(this.options,a.width),this.children[0].$.appendTo(this.$),this.bar.$.appendTo(this.$),this.children[1].$.appendTo(this.$),this.initialized=!0);this.children[0].$.css({width:this.options.true_pos});this.children[1].$.css({left:this.options.true_pos+this.options.border,width:a.width-this.options.true_pos-this.options.border});this.bar.$.css({left:this.options.true_pos});return this},resize:function(){t.call(this);this.show();for(var a=0;a<this.children.length;a++)this.children[a].is_pixie&&
this.children[a].$.pixie("emit","resize");return this}},q=function(){var a=this.$.width();this.bar.$.css({cursor:"row-resize",width:a,height:this.options.border});for(var d=0;d<this.children.length;d++)this.children[d].$.css({width:a})},a=function(){q.call(this);var a=!1,d=this;this.bar.$.mousedown(function(e){d.drag_start_pos_y=e.clientY;d.options_pos_init=d.options.true_pos;a=!0;b("body").css({cursor:"row-resize"})});b(document).mousemove(function(b){a&&(d.options.true_pos=d.options_pos_init+(b.clientY-
d.drag_start_pos_y),d.options.true_pos<d.options.true_pos_min?d.options.true_pos=d.options.true_pos_min:d.options.true_pos>d.options.true_pos_max&&(d.options.true_pos=d.options.true_pos_max),d.show())}).mouseup(function(d){a=!1;b("body").css({cursor:""})})},e={show:function(){var b=l(this.$);this.initialized||(p.call(this),a.call(this),c(this.children),n(this.options,b.height),this.children[0].$.appendTo(this.$),this.bar.$.appendTo(this.$),this.children[1].$.appendTo(this.$),this.initialized=!0);
this.children[0].$.css({height:this.options.true_pos});this.children[1].$.css({top:this.options.true_pos+this.options.border,height:b.height-this.options.true_pos-this.options.border});this.bar.$.css({top:this.options.true_pos});return this},resize:function(){q.call(this);this.show();for(var a=0;a<this.children.length;a++)this.children[a].is_pixie&&this.children[a].$.pixie("emit","resize");return this},initialized:!1},h={type_of:"paned",kind_of:{paned:!0},initialize:function(a){var d=g.container.apply(this);
b.extend(!0,d,h);d.options=b.extend(!0,{},f,a);"vertical"==d.options.orientation?b.extend(!0,d,u):"horizontal"==d.options.orientation?b.extend(!0,d,e):b.error("bad orientation");b(window).resize(function(){d.resize()});return d},add1:function(a){this.children[0]=k(a);return this},add2:function(a){this.children[1]=k(a);return this},position:function(a){this.options.pos=a;return this}};return function(a){for(var b=[],e=0;e<arguments.length;++e)b[e-0]=arguments[e];return h.initialize.apply(this,b)}}(),
container:function(){var f={is_pixie:!0,type_of:"container",kind_of:{container:!0},initialize:function(){var c=k(this);b.extend(!0,c,f);return c},signal_showAll:function(){this.show();for(var b=0;b<this.children.length;b++)this.children[b].$.pixie("emit","showAll");return this},signal_resize:function(){this.resize();return this},children:[]};return function(b){for(var c=[],g=0;g<arguments.length;++g)c[g-0]=arguments[g];return f.initialize.apply(this,c)}}(),emit:function(){var f={showAll:function(){var b=
c(this);b.kind_of.container&&b.signal_showAll();return this},resize:function(){var b=c(this);b.kind_of.container&&b.signal_resize();return this}},g=function(c,g){for(var k=[],l=1;l<arguments.length;++l)k[l-1]=arguments[l];f[c]?f[c].apply(this,k):b.error("Signal named "+c+" not found.");return this};return function(b){for(var c=[],f=0;f<arguments.length;++f)c[f-0]=arguments[f];return g.apply(this,c)}}(),atlas:function(){var c={overlap_elements:function(b){},update_overlaps:function(b,a,e){},initial:{scale:void 0,
center:{x:void 0,y:void 0},left:void 0,top:void 0,right:void 0,bottom:void 0}},k=function(){for(var b=[],a="vss vskip vkern hss hskip hkern box".split(" "),e=0;e<a.length;e++)this[a[e]]=function(d){return function(e){for(var h=[],c=0;c<arguments.length;++c)h[c-0]=arguments[c];b.push({command:a[d],args:h});return this}}(e);var h,c;this.load=function(){h=[];c=[];for(var a=[],e=0;e<b.length;e++)switch(b[e].command){case "vss":case "vskip":case "vkern":0!=a.length&&(h.push([0,a]),a=[]);h.push([1,b[e]]);
break;case "hss":case "hskip":case "hkern":a.push(b[e]);break;case "box":a.push(b[e]),c.push(b[e])}0!=a.length&&h.push([0,a]);return this};this.show=function(a,b,e){if(!a._.firstChild){c||this.load();for(var d=0;d<c.length;d++)a.append(c[d].args[0])}for(var q=0,f=d=a=0;f<h.length;f++){var g=h[f];if(0==g[0]){for(var m=g[1],k=0,l=0,w=0,n=0,p=0;p<m.length;p++){var r=m[p];switch(r.command){case "hss":w++;break;case "hskip":n++;k+=r.args[0];break;case "hkern":k+=r.args[0];break;case "box":k+=r.args[0].prop("scrollWidth"),
l=Math.max(l,r.args[0].prop("scrollHeight"))}}0!=w&&(n=0);g[2]={badness:b-k,height:l,count_hss:w,count_hskip:n};q+=l}else switch(g[1].command){case "vss":a++;break;case "vskip":d++;q+=g[1].args[0];break;case "vkern":q+=g[1].args[0]}}0!=a&&(d=0);b=e-q;for(q=e=0;q<h.length;q++)if(m=h[q],0==m[0])for(f=0,g=m[1],m=m[2],k=0;k<g.length;k++)switch(l=g[k],l.command){case "hss":0!=m.count_hss&&(f+=m.badness/m.count_hss);break;case "hskip":0!=m.count_hskip&&(f+=m.badness/m.count_hskip);f+=l.args[0];break;case "hkern":f+=
l.args[0];break;case "box":l.args[0].attr({x:f,y:e+m.height}),f+=l.args[0].prop("scrollWidth")}else switch(m[1].command){case "vss":0!=a&&(e+=b/a);break;case "vskip":0!=d&&(e+=b/d);e+=m[1].args[0];break;case "vkern":e+=m[1].args[0]}return this}},n=function(b){return{width:b.width(),height:b.height()}},l=function(b){this._=document.createElementNS("http://www.w3.org/2000/svg",b);this.attr=function(a){var b=this._;Object.keys(a).forEach(function(e){b.setAttribute(e,a[e])});return this};this.css=function(a){var b=
this._;Object.keys(a).forEach(function(e){b.style[e]=a[e]});return this};this.appendTo=function(a){a instanceof jQuery?a[0].appendChild(this._):a instanceof l&&a._.appendChild(this._);return this};this.append=function(a){a instanceof jQuery?this._.appendChild(a[0]):a instanceof l?this._.appendChild(a._):this._.appendChild(a);return this};this.empty=function(){for(var a=this._;a.firstChild;)a.removeChild(a.firstChild);return this}},p=function(b){for(var a=[],e=0;e<arguments.length;++e)a[e-0]=arguments[e];
for(var c=e=0;c<a.length;c++)"undefined"!==typeof a[c]&&e++;return e},t=function(){var c=n(this.$),a=this.options.initial,e=p(a.scale,a.left,a.right,a.center.x),h=p(a.scale,a.top,a.bottom,a.center.y);if(2<e||2<h)b.error("too many initial parameter detected.");else if(2==e&&2==h)if(a.scale)this.scale=a.scale,this.x=a.left?a.left:a.center.x?a.center.x-c.width*a.scale/2:a.right-c.width*a.scale,this.y=a.top?a.top-c.height*a.scale:a.center.y?a.center.y-c.height*a.scale/2:a.bottom;else{var f,d;a.left&&
a.right?(e=a.left,f=a.right):a.left&&a.center.x?(e=a.left,f=2*a.center.x-a.left):(e=2*a.center.x-a.right,f=a.right);d=c.width/(f-e);a.top&&a.bottom?(h=a.top,a=a.bottom):a.top&&a.center.y?(h=a.top,a=2*a.center-a.top):(h=2*a.center-a.bottom,a=a.bottom);this.scale=Math.min(d,c.height/(h-a));d=1/this.scale;this.x=(e+f)/2-c.width*d/2;this.y=(h+a)/2-c.height*d/2}else 1==e&&2==h&&"undefined"===typeof a.scale?(a.top&&a.bottom?(e=a.top,h=a.bottom):a.top&&a.center.y?(e=a.top,h=2*a.center-a.top):(e=2*a.center-
a.bottom,h=a.bottom),this.scale=c.height/(e-h),this.x=a.left?a.left:a.center.x?a.center.x-c.width*this.scale/2:a.right-c.width*this.scale):2==e&&1==h&&"undefined"===typeof a.scale?(a.left&&a.right?(e=a.left,h=a.right):a.left&&a.center.x?(e=a.left,h=2*a.center.x-a.left):(e=2*a.center.x-a.right,h=a.right),this.scale=c.width/(h-e),this.y=a.top?a.top-c.height*this.scale:a.center.y?a.center.y-c.height*this.scale/2:a.bottom):0==e&&0==h?(this.y=this.x=0,this.scale=1):b.error("too few initial parameter detected.")},
v=function(){t.call(this);var c=n(this.$);this.svg={_:(new l("svg")).attr({viewBox:"0 0 "+c.width+" "+c.height,xmlns:"http://www.w3.org/2000/svg"}).css({position:"absolute",width:c.width,height:c.height})};this.svg.$=b(this.svg._._).appendTo(this.$);this.overlap_elements=new k;this.options.overlap_elements(this.overlap_elements);this.overlap_elements.load();var a=this,e=!1,f=null,g=null,d=null,p=null;this.svg.$.mousedown(function(b){var c=n(a.$),h=1/a.scale;f=b.clientX;g=b.clientY;d=a.x+c.width*h;
p=a.y+c.height*h;e=!0}).on("onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll",function(b){var e=n(a.$),c=1/a.scale,d=a.scale_base,f=1/d,h=a.x+b.clientX*c,e=a.y+(e.height-b.clientY)*c;b=b.originalEvent.deltaY?-b.originalEvent.deltaY:b.originalEvent.wheelDelta?b.originalEvent.wheelDelta:b.originalEvent.detail;0>b?a.zoom(h,e,d):a.zoom(h,e,f);a.show();a.update_overlaps(h,e)});b(document).mousemove(function(b){var c=1/a.scale;e&&a.moveto(d-(b.clientX-f)*c,p+(b.clientY-
g)*c);var h=n(a.$);a.update_overlaps(a.x+b.clientX*c,a.y+(h.height-b.clientY)*c)}).mouseup(function(a){e=!1})},u={is_pixie:!0,type_of:"atlas",kind_of:{atlas:!0},initialize:function(f){var a=g.container.apply(this);b.extend(!0,a,u);a.options=b.extend(!0,{},c,f);b(window).resize(function(){a.resize();return!0});return a},show:function(){this.initialized||(v.call(this),this.initialized=!0);var c=n(this.$),a=this.scale,e=1/a,e=[this.x,this.y,this.x+c.width*e,this.y+c.height*e],f=!1;if(null==this.cached_box_size)this.cached_box_size=
e,f=!0;else if(e[0]<this.cached_box_size[0]||e[1]<this.cached_box_size[1]||e[2]>this.cached_box_size[2]||e[3]>this.cached_box_size[3]){for(var f=[Math.min,Math.min,Math.max,Math.max],g=0;4>g;g++)this.cached_box_size[g]=f[g](e[g],this.cached_box_size[g]);f=!0}if(f){this.cache_id_list=this.options.listup.call.apply(this.options.listup,[].concat([this],$jscomp.arrayFromIterable(this.cached_box_size)));this.g={_:new l("g")};this.g.$=b(this.g._._);this.g._.appendTo(this.svg._.empty());this.cache_SVG_list=
[];f=this.cache_id_list;for(g=0;g<f.length;g++){var d=this.options.fetch.call(this,f[g]);switch(d.type){case "circle":d={_:(new l("circle")).attr({stroke:d.stroke||"",fill:d.fill||""}),type:"circle",cx:d.cx,cy:d.cy,r:d.r};this.cache_SVG_list[g]=d;d._.appendTo(this.g.$);break;default:b.error("unknown type "+d.type+" detected.")}}this.g2={_:new l("g")};this.g2._.appendTo(this.svg._);this.overlap_elements.show(this.g2._,c.width,c.height)}f=this.cache_SVG_list;for(g=0;g<f.length;g++)switch(f[g].type){case "circle":f[g]._.attr({cx:(f[g].cx-
e[0])*a,cy:c.height-(f[g].cy-e[1])*a,r:f[g].r*a})}return this},drop_cache:function(){this.cache_SVG_list=this.cache_id_list=this.cached_box_size=null;return this},resize:function(){var b=n(this.$);this.svg._.attr({viewBox:"0 0 "+b.width+" "+b.height}).css({width:b.width,height:b.height});this.show.call(this);return this},zoom:function(b,a,c){this.scale/=c;this.x=b-(b-this.x)*c;this.y=a-(a-this.y)*c;return this},moveto:function(b,a){var c=n(this.$),f=1/this.scale;this.x=b-c.width*f;this.y=a-c.height*
f;this.show();return this},update_overlaps:function(b,a){var c=n(this.$);this.options.update_overlaps(b,a,this.scale);this.overlap_elements.show(this.g2._,c.width,c.height);return this},initialized:!1,cached_box_size:null,scale_base:1.3};return function(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];return u.initialize.apply(this,a)}}()};b.fn.pixie=function(c,k){for(var f=[],l=1;l<arguments.length;++l)f[l-1]=arguments[l];if(g[c])return g[c].apply(this,f);b.error("Widget named "+c+
" not found.")};b(".pixie-widget").hide()})(jQuery);
